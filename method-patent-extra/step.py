# -*- coding: utf-8 -*-

## 提取主要步骤
import re

# def extract_steps(text):
#     pattern = re.compile(r'((?:步骤|S)\d+[:：、].*?)[；。]')
#     steps = pattern.findall(text)
#     return steps

# text = ("专利要求书文本。。。")

# steps = extract_steps(text)
# for step in steps:
#     print(step)


##进化提取子步骤
##现在，正则表达式模式pattern已经修改为r'((?:步骤|S)\d+(?:\.\d+)?[:：、].*?)[；。]'。这个新的模式增加了(?:\.\d+)?部分，可以匹配子步骤（如S2.1、S2.2等）。

import re

def extract_steps(text):
    #pattern = re.compile(r'((?:步骤|S)\d+(?:\.\d+)?[:：、].*?)[；。]')
    pattern = re.compile(r'((?:步骤|S)\d+?.*?)[；。]')
    steps = pattern.findall(text)
    return steps

text = ('''
1.一种具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，包括如下方法步骤：S1)、烟囱的主风系统形成气流，通过气流的作用带动烟通过烟囱流出；S2、在烟通过烟囱流出的过程中，其中：烟囱内的降温系统对烟进行降温；烟囱内的除尘系统对烟进行除尘；S3、降温和除尘后，监测系统对烟囱内烟的温度、风量以及含尘量进行实时监测，并形成反馈指令；S4、回风系统接收监测系统形成的反馈指令，通过反馈指令对烟囱内风量以及风向进行控制，用以使烟囱内的烟进行回风。2.根据权利要求1所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述烟囱包括外管体(100)，所述主风系统包括主风气流输出设备(600)，所述主风气流输出设备(600)设置在(100)内。3.根据权利要求2所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述回风系统包括内管体(200)和回风气流输出设备(300)，其中：所述内管体(200)设置在主风气流输出设备(600)外，所述内管体(200)外壁和外管体(100)内壁之间形成回风通道，所述内管体(200)上呈环形阵列开设有多个回风口(210)，所述回风气流输出设备(300)设置在回风通道内靠近回风口(210)底部的位置。4.根据权利要求3所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述降温系统包括冷凝翅板(400)，所述冷凝翅板(400)呈环形阵列设置在外管体(100)内，并与外管体(100)固定连接；所述除尘系统包括过滤层(500)，所述过滤层(500)设置在主风气流输出设备(600)的顶部，并与内管体(200)固定连接。5.根据权利要求4所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述监测系统包括温度传感器(220)、烟尘传感器(230)和风量传感器(110)，其中：所述烟尘传感器(230)设置在靠近过滤层(500)顶部的位置，所述温度传感器(220)设置在烟尘传感器(230)顶部，所述温度传感器(220)和烟尘传感器(230)均安装在内管体(200)的内壁上；所述风量传感器(110)设置有两个，两个风量传感器(110)相对设置在外管体(100)的顶部。6.根据权利要求5所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述回风气流输出设备(300)外设置有转接架，所述回风气流输出设备(300)与转接架转动连接。7.根据权利要求6所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述回风通道包括降温回风腔体和降尘回风腔体，其中：所述降温回风腔体为回风通道位于过滤层(500)顶部的部分；所述降尘回风腔体为回风通道位于过滤层(500)底部的部分。8.根据权利要求7所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述监测系统对含尘量的监测算法公式如下：M＝[B(1-η)+Aar]/2；其中，M为含尘浓度；B为烟囱的出烟量；η为过滤层(500)的除尘效率；Aar为烟尘传感器(230)测得到含灰量。9.根据权利要求8所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述监测系统反馈指令形成步骤如下：S3.1、设定温度以及含尘量阈值，然后温度传感器(220)对主风气流输出设备(600)吹出的烟进行温度监测，得到实时温度值；S3.2、将实时温度值与温度阈值进行对比，其中：实时温度值大于温度阈值则执行控制阶段，形成执行反馈指令；实时温度值小于温度阈值则发出温度空置反馈指令；S3.3、烟尘传感器(230)对过滤层(500)顶部流过的烟进行含尘量监测，得到实时含尘值；S3-4、将实时含尘值与含尘量阈值进行对比，其中：实时含尘值大于含尘量阈值则执行控制阶段，形成执行反馈指令；实时含尘值小于含尘量阈值则发出含尘量空置反馈指令。10.根据权利要求9所述的具有除尘降温功能烟囱式散热恒温风道风量控制算法，其特征在于，所述控制阶段的步骤如下：S4.1、回风系统接收执行反馈指令以及空置反馈指令；S4.2、接收风量传感器(110)监测的风量信息，其中风量计算公式如下：F＝S·H·C；其中，F为风量；S为两个接收风量传感器(110)之间的跨度距离；C为风量传感器(110)监测的风压；S4.3、回风气流输出设备(300)根据风量信息、执行反馈指令以及空置反馈指令进行转动。
''')

steps = extract_steps(text)
for step in steps:
    print(step)





